"use strict";jQuery(document).ready(function(t){const n={atcButton:"",redirectAfterATC:!1,init:function(){this.showPopup(),this.chooseAction(),this.afterAjaxATC()},showPopup:function(){t("form.cart button[type=submit], .single_add_to_cart_button, .ajax_add_to_cart").on("click",function(a){t(this).hasClass("disabled")||window.getCookie("wacv_get_email")||(a.stopImmediatePropagation(),a.preventDefault(),n.atcButton=t(this),!n.atcButton.hasClass("ajax_add_to_cart")&&wacv_php_js.redirect?n.atcButton.after(`<input type="hidden" name="wacv_redirect" value="${wacv_php_js.redirect}">`):n.redirectAfterATC=!0,t("#wacv-modal").fadeIn(300),window.connectFB&&"function"==typeof window.connectFB&&window.connectFB())})},chooseAction:function(){t(".wacv-add-to-cart-btn").on("click",function(){t(".wacv-email-invalid-notice, .wacv-phone-number-invalid-notice").hide();let a=t(".wacv-popup-input-email").val(),e=t(".wacv-popup-input-phone-number").val(),i=!1;!function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}(a)&&parseInt(wacv_php_js.emailField)&&(t(".wacv-email-invalid-notice").show(),i=!0),!function(t){return/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(t)}(e)&&parseInt(wacv_php_js.phoneField)&&"template-1"===wacv_php_js.style&&(t(".wacv-phone-number-invalid-notice").show(),i=!0),i||n.importInfo(),n.confirmOptIn()}),t(".wacv-close-popup").on("click",function(){window.wacvSetCookie("wacv_get_email",!0,wacv_php_js.dismissDelay),t("#wacv-modal").fadeOut(200),n.atcButton.click()})},confirmOptIn:function(){window.cbStt&&window.confirmOptin.run()},importInfo:function(){var a={action:"wacv_get_info",billing_email:t(".wacv-popup-input-email").val(),billing_phone:t(".wacv-popup-input-phone-number").val(),user_ref:window.cbStt?window.user_ref:""};t.ajax({url:wacv_php_js.ajax_url,data:a,type:"post",xhrFields:{withCredentials:!0},beforeSend:function(){t(".wacv-add-to-cart-btn").addClass("loading")},success:function(a){window.wacvSetCookie("wacv_get_email",!0,86400),window.cbStt&&window.wacvSetCookie("wacv_fb_checkbox",!0,86400),t("#wacv-modal").fadeOut(200),n.atcButton.click()},error:function(t){}})},afterAjaxATC:function(){t(document).ajaxComplete(function(t,a,e){"/?wc-ajax=add_to_cart"===e.url&&!0===n.redirectAfterATC&&wacv_php_js.redirect&&window.location.replace(wacv_php_js.redirect)})}};n.init()});